language: cpp

compiler:
  - gcc

before_install:
  # Always install g++4.8.1
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  
  # Install recent version of Boost
  - sudo add-apt-repository -y ppa:boost-latest/ppa

  - sudo apt-get update -qq

install: 
  # - sudo apt-get install libboost1.54-all-dev

  # Always install valgrind
  - sudo apt-get install valgrind

  # Always install g++4.8.1
  - sudo apt-get install -qq g++-4.8
  - sudo apt-get install -qq g++-4.8-multilib
  - if [ "$CXX" = "g++" ]; then export CMAKE_CXX_COMPILER="g++-4.8"; fi
  - if [ "$CXX" = "g++" ]; then export CXX="g++-4.8"; fi

  # Need to see if pkg-config is configured and what version
  - sudo apt-get install libgtest-dev

script:
  - chmod +x autogen.sh
  - ./autogen.sh --prefix $PWD/install
  - make

after_script:
  - make check

branches:
  only:
    - master
    # - develop - might be a better choice for the future....
